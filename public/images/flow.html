<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Traffic Flow Comparison</title>
  <style>
    :root {
      --bg: #0b1220;
      --panel: #0f172a;
      --panel-border: #1f2937;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --accent-a: #38bdf8;
      --accent-b: #22c55e;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Segoe UI", system-ui, -apple-system, sans-serif;
      background: radial-gradient(circle at 20% 20%, rgba(56,189,248,0.08), transparent 32%), radial-gradient(circle at 80% 10%, rgba(34,197,94,0.08), transparent 28%), var(--bg);
      color: var(--text);
      padding: 16px;
    }
    .shell { max-width: 1400px; margin: 0 auto; display: flex; flex-direction: column; gap: 14px; }
    header h1 { margin: 0; font-size: 26px; }
    header p { margin: 0; color: var(--muted); font-size: 14px; }
    .row { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 14px; }
    .panel {
      position: relative;
      overflow: hidden;
      background: linear-gradient(135deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border: 1px solid var(--panel-border);
      border-radius: 14px;
      padding: 10px;
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.35);
    }
    .panel::before {
      content: "";
      position: absolute;
      inset: 10%;
      background: radial-gradient(circle at 20% 20%, rgba(56,189,248,0.1), transparent 40%);
      filter: blur(40px);
      z-index: 0;
    }
    .panel > * { position: relative; z-index: 1; }
    svg { width: 100%; height: auto; display: block; }
    .node { fill: #0a1224; stroke: #1f2937; stroke-width: 2; rx: 12; filter: drop-shadow(0 10px 18px rgba(0,0,0,0.28)); }
    .node.ingress { stroke: var(--accent-a); }
    .node.gateway { stroke: var(--accent-b); }
    .label { fill: var(--text); font-size: 12px; text-anchor: middle; }
    .muted { fill: var(--muted); font-size: 11px; text-anchor: middle; }
    .arrow { stroke: var(--muted); color: var(--muted); stroke-width: 2.5; fill: none; marker-end: url(#arrow); opacity: 0.6; }
    .arrow.ingress { stroke: var(--accent-a); color: var(--accent-a); opacity: 0.8; }
    .arrow.gateway { stroke: var(--accent-b); color: var(--accent-b); opacity: 0.8; }
    .marker { fill: var(--panel); stroke: var(--muted); stroke-width: 1.2; }
    .marker text { fill: var(--text); font-weight: 700; font-size: 11px; text-anchor: middle; dominant-baseline: middle; }
    .steps { background: rgba(255,255,255,0.04); border: 1px solid var(--panel-border); border-radius: 12px; padding: 12px 14px; display: grid; grid-template-columns: repeat(auto-fit, minmax(220px,1fr)); gap: 8px; }
    .steps strong { color: var(--text); }
    .chart-steps { margin-top: 10px; background: rgba(255,255,255,0.03); border: 1px dashed var(--panel-border); border-radius: 10px; padding: 10px 12px; font-size: 13px; color: var(--text); }
    .chart-steps div { margin-bottom: 4px; }
    .chart-steps div:last-child { margin-bottom: 0; }
  </style>
</head>
<body>
  <div class="shell">
    <header>
      <h1>Ingress vs Gateway API + NGINX Gateway Fabric</h1>
      <p>Side-by-side comparison with numbered paths and a single step legend.</p>
    </header>

    <div class="row">
      <section class="panel">
        <h3 style="margin:0 0 6px; color: var(--text);">Before: Ingress-NGINX</h3>
        <svg viewBox="0 0 920 320" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <marker id="arrow" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
              <path d="M0 0 L12 6 L0 12 Z" fill="currentColor"/>
            </marker>
          </defs>

          <rect x="20" y="110" width="120" height="70" class="node" />
          <text x="80" y="145" class="label">ğŸ‘¤ User</text>
          <text x="80" y="163" class="muted">Browser</text>

          <rect x="170" y="110" width="120" height="70" class="node" />
          <text x="230" y="145" class="label">ğŸŒ DNS</text>

          <rect x="320" y="110" width="120" height="70" class="node" />
          <text x="380" y="145" class="label">â˜ï¸ Load Balancer</text>

          <rect x="470" y="95" width="140" height="90" class="node ingress" />
          <text x="540" y="135" class="label">ğŸ§­ Ingress-NGINX</text>
          <text x="540" y="153" class="muted">TLS termination</text>

          <rect x="640" y="95" width="140" height="90" class="node" />
          <text x="710" y="135" class="label">ğŸ“œ Ingress Rules</text>
          <text x="710" y="153" class="muted">Annotations</text>

          <rect x="640" y="210" width="140" height="70" class="node" />
          <text x="710" y="245" class="label">ğŸ”€ Service</text>

          <rect x="800" y="190" width="100" height="90" class="node" />
          <text x="850" y="235" class="label">ğŸ“¦ Pods</text>

          <path d="M140 145 L170 145" class="arrow" />
          <g class="marker"><circle cx="155" cy="135" r="13"/><text x="155" y="135">1</text></g>

          <path d="M290 145 L320 145" class="arrow" />
          <g class="marker"><circle cx="305" cy="135" r="13"/><text x="305" y="135">2</text></g>

          <path d="M440 145 L470 145" class="arrow ingress" />
          <g class="marker"><circle cx="455" cy="135" r="13"/><text x="455" y="135">3</text></g>

          <path d="M610 145 L640 145" class="arrow ingress" />
          <g class="marker"><circle cx="625" cy="135" r="13"/><text x="625" y="135">4</text></g>

          <path d="M710 185 L710 210" class="arrow ingress" />
          <g class="marker"><circle cx="720" cy="197" r="13"/><text x="720" y="197">5</text></g>

          <path d="M780 245 L800 235" class="arrow ingress" />
          <g class="marker"><circle cx="790" cy="225" r="13"/><text x="790" y="225">6</text></g>
        </svg>
        <div class="chart-steps">
          <div><strong>Step 1.</strong> User hits DNS.</div>
          <div><strong>Step 2.</strong> Load balancer accepts traffic.</div>
          <div><strong>Step 3.</strong> Ingress-NGINX terminates TLS.</div>
          <div><strong>Step 4.</strong> Ingress rules via annotations decide routing.</div>
          <div><strong>Step 5.</strong> Service fans out to backends.</div>
          <div><strong>Step 6.</strong> Pods process the request.</div>
        </div>
      </section>

      <section class="panel">
        <h3 style="margin:0 0 6px; color: var(--text);">Now: Gateway API + NGINX Gateway Fabric</h3>
        <svg viewBox="0 0 920 320" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <marker id="arrow-g" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
              <path d="M0 0 L12 6 L0 12 Z" fill="currentColor"/>
            </marker>
          </defs>

          <rect x="20" y="110" width="120" height="70" class="node" />
          <text x="80" y="145" class="label">ğŸ‘¤ User</text>
          <text x="80" y="163" class="muted">Browser</text>

          <rect x="170" y="110" width="120" height="70" class="node" />
          <text x="230" y="145" class="label">ğŸŒ DNS</text>

          <rect x="320" y="110" width="120" height="70" class="node" />
          <text x="380" y="145" class="label">â˜ï¸ Load Balancer</text>

          <rect x="470" y="95" width="140" height="90" class="node gateway" />
          <text x="540" y="135" class="label">ğŸ§­ Shared Gateway</text>
          <text x="540" y="153" class="muted">NGF listener</text>

          <rect x="640" y="95" width="140" height="90" class="node" />
          <text x="710" y="135" class="label">ğŸ“ HTTPRoutes</text>
          <text x="710" y="153" class="muted">ReferenceGrants</text>

          <rect x="640" y="210" width="140" height="70" class="node" />
          <text x="710" y="245" class="label">ğŸ”€ Service</text>

          <rect x="800" y="190" width="100" height="90" class="node" />
          <text x="850" y="235" class="label">ğŸ“¦ Pods</text>
          <text x="850" y="253" class="muted">mTLS capable</text>

          <path d="M140 145 L170 145" class="arrow gateway" marker-end="url(#arrow-g)" />
          <g class="marker"><circle cx="155" cy="135" r="13"/><text x="155" y="135">1</text></g>

          <path d="M290 145 L320 145" class="arrow gateway" marker-end="url(#arrow-g)" />
          <g class="marker"><circle cx="305" cy="135" r="13"/><text x="305" y="135">2</text></g>

          <path d="M440 145 L470 145" class="arrow gateway" marker-end="url(#arrow-g)" />
          <g class="marker"><circle cx="455" cy="135" r="13"/><text x="455" y="135">3</text></g>

          <path d="M610 145 L640 145" class="arrow gateway" marker-end="url(#arrow-g)" />
          <g class="marker"><circle cx="625" cy="135" r="13"/><text x="625" y="135">4</text></g>

          <path d="M710 185 L710 210" class="arrow gateway" marker-end="url(#arrow-g)" />
          <g class="marker"><circle cx="720" cy="197" r="13"/><text x="720" y="197">5</text></g>

          <path d="M780 245 L800 235" class="arrow gateway" marker-end="url(#arrow-g)" />
          <g class="marker"><circle cx="790" cy="225" r="13"/><text x="790" y="225">6</text></g>
        </svg>
        <div class="chart-steps">
          <div><strong>Step 1.</strong> User hits DNS.</div>
          <div><strong>Step 2.</strong> Load balancer accepts traffic.</div>
          <div><strong>Step 3.</strong> Shared Gateway (NGF) terminates TLS.</div>
          <div><strong>Step 4.</strong> HTTPRoutes + ReferenceGrants evaluate routing.</div>
          <div><strong>Step 5.</strong> Service fans out to backends.</div>
          <div><strong>Step 6.</strong> Pods process with policy/mTLS support.</div>
        </div>
      </section>
    </div>

  </div>
</body>
</html>
